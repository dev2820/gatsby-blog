<!DOCTYPE html><html lang="kr" class="__variable_fa65fd __variable_7691e4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/next-blog/_next/static/media/3e7b7e3fd4560936-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/next-blog/_next/static/media/ff840cfebfb63b0c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/next-blog/_next/static/css/43c992d791131587.css" data-precedence="next"/><link rel="stylesheet" href="/next-blog/_next/static/css/0b816f27d85c600a.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/next-blog/_next/static/chunks/webpack-fd7f88654cc0057c.js"/><script src="/next-blog/_next/static/chunks/f14ca715-e5f2eca283bbfe70.js" async=""></script><script src="/next-blog/_next/static/chunks/465-4009e64bced28f65.js" async=""></script><script src="/next-blog/_next/static/chunks/main-app-e31317f2a5bf611e.js" async=""></script><script src="/next-blog/_next/static/chunks/618-ad03139aae4ad22e.js" async=""></script><script src="/next-blog/_next/static/chunks/app/posts/page-e8c6275c8ebfad50.js" async=""></script><script src="/next-blog/_next/static/chunks/952ad60e-fcd45d2bbbe9eaef.js" async=""></script><script src="/next-blog/_next/static/chunks/921-b9f9022904f683db.js" async=""></script><script src="/next-blog/_next/static/chunks/app/posts/%5Bslug%5D/page-e6dc09bc5b693eb5.js" async=""></script><script src="/next-blog/_next/static/chunks/app/layout-1aefad6858c41728.js" async=""></script><title>Terra Dev Blog - faster-async-functions-and-promises</title><link rel="canonical" href="https:/dev2820.github.io/next-blog/faster-async-functions-and-promises"/><meta property="og:title" content="faster-async-functions-and-promises"/><meta property="og:url" content="https:/dev2820.github.io/next-blog/faster-async-functions-and-promises"/><meta property="og:locale" content="ko_KR"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="faster-async-functions-and-promises"/><link rel="icon" href="/next-blog/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/next-blog/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_fa65fd flex flex-col text-gray-800"><header class="flex flex-row justify-center py-2 items-center self-center w-full max-w-screen-md px-4"><a href="/next-blog"><img alt="Terra&#x27;s Devlog logo" loading="lazy" width="258" height="48" decoding="async" data-nimg="1" style="color:transparent" src="/next-blog/_next/static/media/logo-full.a2c57f51.svg"/></a><div class="flex-1"></div><nav class=""><menu class="flex flex-row gap-8"><li><a href="/next-blog/posts"><div class="cursor-pointer duration-200 font-medium text-primary hover:text-primary">Posts</div></a></li></menu></nav></header><main class="self-center w-full max-w-screen-md p-4 text-gray-800"><article><header id="post-meta"><h1 class="mt-7 mb-4 text-heading1 font-bold leading-normal" id="faster-async-functions-and-promises">faster-async-functions-and-promises</h1><time dateTime="2024-01-21" aria-label="Published on 2024-01-21">2024-01-21</time> <!-- -->|<!-- --> <time dateTime="PT0M" aria-label="Estimated reading time">0<!-- --> mins</time></header><section id="content"><p class="font-light leading-normal mt-4 mb-2">참고)</p>
<p class="font-light leading-normal mt-4 mb-2"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" href="https://v8.dev/blog/fast-async">https://v8.dev/blog/fast-async</a></p>
<p class="font-light leading-normal mt-4 mb-2">자바스크립트의 비동기 프로세스는 전통적으로 특별히 빠르지 않은 것으로 유명하다. 설상가상으로, 특히 Node.js 서버와 같은 라이브 자바스크립트 응용 프로그램들을 디버깅하는 것은 특히 비동기 프로그래밍에 있어서 쉬운 일이 아니다. 운 좋게도, 그들은 변화하고 있다. 이 글에서는 V8 (그리고 자바스크립트 엔진에서 어느 정도)에서 비동기 기능과 <code class="py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace">Promise</code>를 최적화한 방법을 탐구하고 비동기 코드에 대한 디버깅 경험을 개선한 방법을 설명한다.</p>
<h2 class="mt-6 mb-3 text-heading2 font-semibold leading-normal" id="a-new-approach-to-async-programming"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" aria-hidden="true" tabindex="-1" href="#a-new-approach-to-async-programming"><span class="icon icon-link"></span></a>A new approach to async programming</h2>
<h2 class="mt-5 mb-2 text-heading3 font-semibold leading-normal" id="from-callbacks-to-promises-to-async-functions"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" aria-hidden="true" tabindex="-1" href="#from-callbacks-to-promises-to-async-functions"><span class="icon icon-link"></span></a>from callbacks to promises to async functions</h2>
<p class="font-light leading-normal mt-4 mb-2">Promise가 자바스크립트 언어의 일부가 되기 전, callback-기반 API들은 일반적으로 비동기 코드에 특히 Node.js에서 사용되었다.</p>
<p class="font-light leading-normal mt-4 mb-2">(코드)</p>
<p class="font-light leading-normal mt-4 mb-2">앞선 방식으로 깊이 nesting된 콜백들을 사용하는 특정 패턴은 코드 가독성을 떨어뜨리고 유지보수를 어렵게 하기 때문에 &quot;callback hell&quot;이라고 불린다.</p>
<p class="font-light leading-normal mt-4 mb-2">운좋게도, 이제 promises가 자바스크립트 언어에 포함되었기 때문에 같은 코드도 다음과 같이 멋지고 유지보수 편하게 작성될 수 있다.</p>
<p class="font-light leading-normal mt-4 mb-2">(코드)</p>
<p class="font-light leading-normal mt-4 mb-2">더 최근엔, 자바스크립트에서 async function을 지원하기 시작했다. 앞선 비동기 코드는 이제 동기 코드와 아주 유사하게 작성될 수 있다.</p>
<p class="font-light leading-normal mt-4 mb-2">(코드)</p>
<p class="font-light leading-normal mt-4 mb-2">async 함수를 사용하면, 코드는 더 간결해지고, 동작은 여전히 비동기임에도 제어와 데이터 흐름이 훨씬 쉽게 따라온다. (자바스크립트 실행은 여전히 싱글 스레드에서 동작합을 기억하라, 이는 비동기 함수가 스스로 물리적 스레드를 생성하지 않음을 의미한다.)</p>
<h2 class="mt-5 mb-2 text-heading3 font-semibold leading-normal" id="from-event-listener-calblacks-to-async-lteration"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" aria-hidden="true" tabindex="-1" href="#from-event-listener-calblacks-to-async-lteration"><span class="icon icon-link"></span></a>From event listener calblacks to async lteration</h2>
<p class="font-light leading-normal mt-4 mb-2">Node.js에서 특히 자주 볼 수 있는 또 다른 비동기 패러다임은 ReadableStream이다. 여기 예제가 있다.</p>
<p class="font-light leading-normal mt-4 mb-2">(코드)</p>
<p class="font-light leading-normal mt-4 mb-2">이 코드는 따라가기 살짝 어려울 수 있다: 들어오는 데이터는 콜백에서만 접근할 수 있는 청크들로 처리되며, 스트림의 종료를 알리는 시그널 또한 콜백 내부에서 발생한다. 함수가 즉시 종료되고 실제 처리는 콜백 내부에서 이루어져야한다는 것을 깨닫지 못하면 버그를 만들어내기 쉽다.</p>
<p class="font-light leading-normal mt-4 mb-2">다행히도 ES2018에서 부터 async iteration이라 불리는 멋진 기능이 도입되어 이 코드를 단순하게 만들 수 있다.</p>
<p class="font-light leading-normal mt-4 mb-2">(코드)</p>
<p class="font-light leading-normal mt-4 mb-2">실제 요청을 처리하는 두 개의 다른 콜백(data와 end 콜백)을 삽입하는 대신, 우리는 모든 것을 하나의 async function안에 넣을 수 있고 새 루프인 <code class="py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace">for await ...of</code> 를 이용해 모든 청크들을 비동기적으로 순회할 수 있다. 우리는 또한 여기에 <code class="py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace">try-catch</code> 를 더해 <code class="py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace">unhandleRejection</code> 문제를 피할 수 있다.</p>
<p class="font-light leading-normal mt-4 mb-2">우리는 이미 이 새 기능들을 오늘날 실서비스에 도입하고 있다. 비동기 함수는 Node.js 8 (V8 v6.2 / Chrome 62)부터 완전히 지원되고 있고 async iterator와 generator는 Node.js 10 (V8 v6.8 / Chrome 68) 부터 완전히 지원되고 있다.</p>
<h2 class="mt-5 mb-2 text-heading3 font-semibold leading-normal" id="async-performance-improvements"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" aria-hidden="true" tabindex="-1" href="#async-performance-improvements"><span class="icon icon-link"></span></a>Async performance improvements</h2>
<p class="font-light leading-normal mt-4 mb-2"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium text-primary" type="link" href="https://v8.dev/blog/fast-async#async-performance-improvements">https://v8.dev/blog/fast-async#async-performance-improvements</a></p>
<p class="font-light leading-normal mt-4 mb-2">여기서부터</p><button class="__trds __trds button trds-inline-flex trds-justify-center trds-place-items-center trds-whitespace-nowrap trds-rounded-lg trds-text-md trds-font-medium trds-gap-2 trds-transition-colors trds-cursor-pointer disabled:trds-cursor-not-allowed disabled:trds-opacity-50 trds-bg-neutral trds-text-fg-neutral disabled:trds-bg-neutral enabled:hover:trds-bg-neutral-hover enabled:active:trds-bg-neutral-pressed __trds trds-h-11 trds-w-11 trds-px-0 trds-py-0" type="button" aria-disabled="false" aria-busy="false" aria-label="Share this article"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg></button><div data-scope="toast" data-part="group" dir="ltr" tabindex="-1" aria-label="bottom Notifications alt+T" id="toast-group:bottom" data-placement="bottom" data-side="bottom" data-align="center" aria-live="polite" role="region" style="position:fixed;pointer-events:none;display:flex;flex-direction:column;--gap:16px;--first-height:0px;z-index:2147483647;align-items:center;bottom:max(env(safe-area-inset-bottom, 0px), 1rem);inset-inline-end:calc(env(safe-area-inset-right, 0px) + 1rem);inset-inline-start:calc(env(safe-area-inset-left, 0px) + 1rem)"></div></section><section id="author"><div class="flex flex-row gap-4 items-center"><div class="__trds trds-animate-shimmer trds-bg-clip-padding-box trds-text-transparent trds-cursor-default trds-pointer-events-none trds-select-none before::trds-invisible after::trds-invisible [&amp;_*]:trds-invisible trds-rounded-lg rounded-full"><div data-scope="avatar" data-part="root" dir="ltr" id="avatar::Rf7puuja:" class="trds-rounded-full trds-overflow-hidden w-16 h-16"><img data-scope="avatar" data-part="image" hidden="" dir="ltr" id="avatar::Rf7puuja::image" data-state="hidden" class="trds-bg-muted"/><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user trds-bg-muted trds-w-full trds-h-full" data-scope="avatar" data-part="fallback" dir="ltr" id="avatar::Rf7puuja::fallback" data-state="visible"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div></div><div class="text-pretty flex flex-col gap-2"><div class="__trds trds-animate-shimmer trds-bg-clip-padding-box trds-text-transparent trds-cursor-default trds-pointer-events-none trds-select-none before::trds-invisible after::trds-invisible [&amp;_*]:trds-invisible trds-rounded-lg h-fit w-fit"><strong class="inline-block h-6 min-w-36"> </strong></div><div class="__trds trds-animate-shimmer trds-bg-clip-padding-box trds-text-transparent trds-cursor-default trds-pointer-events-none trds-select-none before::trds-invisible after::trds-invisible [&amp;_*]:trds-invisible trds-rounded-lg h-fit w-fit"><p class="whitespace-pre-wrap h-6 min-w-64"></p></div></div></div></section></article></main><footer class="self-center w-full max-w-screen-md px-4"><p>© 2024-<!-- -->2024<!-- --> <!-- -->dev2820<!-- -->. All rights reserved.</p></footer><script src="/next-blog/_next/static/chunks/webpack-fd7f88654cc0057c.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/next-blog/_next/static/media/3e7b7e3fd4560936-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/next-blog/_next/static/media/ff840cfebfb63b0c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/next-blog/_next/static/css/43c992d791131587.css\",\"style\"]\n4:HL[\"/next-blog/_next/static/css/0b816f27d85c600a.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[5726,[],\"\"]\n8:I[1699,[],\"\"]\na:I[2579,[],\"\"]\nb:I[9618,[\"618\",\"static/chunks/618-ad03139aae4ad22e.js\",\"991\",\"static/chunks/app/posts/page-e8c6275c8ebfad50.js\"],\"\"]\nc:I[5969,[\"587\",\"static/chunks/952ad60e-fcd45d2bbbe9eaef.js\",\"921\",\"static/chunks/921-b9f9022904f683db.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-e6dc09bc5b693eb5.js\"],\"Image\"]\nd:I[6167,[\"618\",\"static/chunks/618-ad03139aae4ad22e.js\",\"921\",\"static/chunks/921-b9f9022904f683db.js\",\"185\",\"static/chunks/app/layout-1aefad6858c41728.js\"],\"GlobalNavigationBar\"]\nf:I[3141,[],\"\"]\n9:[\"slug\",\"faster-async-functions-and-promises\",\"d\"]\n10:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/next-blog/_next/static/css/43c992d791131587.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"9FS9kJXQH1N-ZuLKHKxJI\",\"assetPrefix\":\"/next-blog\",\"initialCanonicalUrl\":\"/posts/faster-async-functions-and-promises\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"faster-async-functions-and-promises\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"faster-async-functions-and-promises\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"faster-async-functions-and-promises\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",\"$L7\"],null],null]},[[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/next-blog/_next/static/css/0b816f27d85c600a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"kr\",\"className\":\"__variable_fa65fd __variable_7691e4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_fa65fd flex flex-col text-gray-800\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex flex-row justify-center py-2 items-center self-center w-full max-w-screen-md px-4\",\"children\":[[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":[\"$\",\"$Lc\",null,{\"src\":{\"src\":\"/next-blog/_next/static/media/logo-full.a2c57f51.svg\",\"height\":48,\"width\":258,\"blurWidth\":0,\"blurHeight\":0},\"alt\":\"Terra's Devlog logo\",\"height\":48}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\"}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"main\",null,{\"className\":\"self-center w-full max-w-screen-md p-4 text-gray-800\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"self-center w-full max-w-screen-md px-4\",\"children\":[\"$\",\"p\",null,{\"children\":[\"© 2024-\",2024,\" \",\"dev2820\",\". All rights reserved.\"]}]}]]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Le\"],\"globalErrorComponent\":\"$f\",\"missingSlots\":\"$W10\"}]]\n"])</script><script>self.__next_f.push([1,"11:I[6894,[\"587\",\"static/chunks/952ad60e-fcd45d2bbbe9eaef.js\",\"921\",\"static/chunks/921-b9f9022904f683db.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-e6dc09bc5b693eb5.js\"],\"Anchor\"]\n12:I[4547,[\"587\",\"static/chunks/952ad60e-fcd45d2bbbe9eaef.js\",\"921\",\"static/chunks/921-b9f9022904f683db.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-e6dc09bc5b693eb5.js\"],\"ShareButton\"]\n13:I[6398,[\"587\",\"static/chunks/952ad60e-fcd45d2bbbe9eaef.js\",\"921\",\"static/chunks/921-b9f9022904f683db.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-e6dc09bc5b693eb5.js\"],\"AuthorInfo\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"article\",null,{\"children\":[[\"$\",\"header\",null,{\"id\":\"post-meta\",\"children\":[\"$undefined\",[\"$\",\"h1\",null,{\"className\":\"mt-7 mb-4 text-heading1 font-bold leading-normal\",\"id\":\"faster-async-functions-and-promises\",\"children\":\"faster-async-functions-and-promises\"}],[\"$\",\"time\",null,{\"dateTime\":\"2024-01-21\",\"aria-label\":\"Published on 2024-01-21\",\"children\":\"2024-01-21\"}],\" \",\"|\",\" \",[\"$\",\"time\",null,{\"dateTime\":\"PT0M\",\"aria-label\":\"Estimated reading time\",\"children\":[0,\" mins\"]}]]}],[\"$\",\"section\",null,{\"id\":\"content\",\"children\":[[[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"참고)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"$\",\"$L11\",null,{\"href\":\"https://v8.dev/blog/fast-async\",\"children\":\"https://v8.dev/blog/fast-async\"}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"자바스크립트의 비동기 프로세스는 전통적으로 특별히 빠르지 않은 것으로 유명하다. 설상가상으로, 특히 Node.js 서버와 같은 라이브 자바스크립트 응용 프로그램들을 디버깅하는 것은 특히 비동기 프로그래밍에 있어서 쉬운 일이 아니다. 운 좋게도, 그들은 변화하고 있다. 이 글에서는 V8 (그리고 자바스크립트 엔진에서 어느 정도)에서 비동기 기능과 \",[\"$\",\"code\",null,{\"className\":\"py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace\",\"children\":\"Promise\"}],\"를 최적화한 방법을 탐구하고 비동기 코드에 대한 디버깅 경험을 개선한 방법을 설명한다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-6 mb-3 text-heading2 font-semibold leading-normal\",\"id\":\"a-new-approach-to-async-programming\",\"children\":[[\"$\",\"$L11\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#a-new-approach-to-async-programming\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"A new approach to async programming\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-5 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"from-callbacks-to-promises-to-async-functions\",\"children\":[[\"$\",\"$L11\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#from-callbacks-to-promises-to-async-functions\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"from callbacks to promises to async functions\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"Promise가 자바스크립트 언어의 일부가 되기 전, callback-기반 API들은 일반적으로 비동기 코드에 특히 Node.js에서 사용되었다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"앞선 방식으로 깊이 nesting된 콜백들을 사용하는 특정 패턴은 코드 가독성을 떨어뜨리고 유지보수를 어렵게 하기 때문에 \\\"callback hell\\\"이라고 불린다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"운좋게도, 이제 promises가 자바스크립트 언어에 포함되었기 때문에 같은 코드도 다음과 같이 멋지고 유지보수 편하게 작성될 수 있다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"더 최근엔, 자바스크립트에서 async function을 지원하기 시작했다. 앞선 비동기 코드는 이제 동기 코드와 아주 유사하게 작성될 수 있다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"async 함수를 사용하면, 코드는 더 간결해지고, 동작은 여전히 비동기임에도 제어와 데이터 흐름이 훨씬 쉽게 따라온다. (자바스크립트 실행은 여전히 싱글 스레드에서 동작합을 기억하라, 이는 비동기 함수가 스스로 물리적 스레드를 생성하지 않음을 의미한다.)\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-5 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"from-event-listener-calblacks-to-async-lteration\",\"children\":[[\"$\",\"$L11\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#from-event-listener-calblacks-to-async-lteration\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"From event listener calblacks to async lteration\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"Node.js에서 특히 자주 볼 수 있는 또 다른 비동기 패러다임은 ReadableStream이다. 여기 예제가 있다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"이 코드는 따라가기 살짝 어려울 수 있다: 들어오는 데이터는 콜백에서만 접근할 수 있는 청크들로 처리되며, 스트림의 종료를 알리는 시그널 또한 콜백 내부에서 발생한다. 함수가 즉시 종료되고 실제 처리는 콜백 내부에서 이루어져야한다는 것을 깨닫지 못하면 버그를 만들어내기 쉽다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"다행히도 ES2018에서 부터 async iteration이라 불리는 멋진 기능이 도입되어 이 코드를 단순하게 만들 수 있다.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"실제 요청을 처리하는 두 개의 다른 콜백(data와 end 콜백)을 삽입하는 대신, 우리는 모든 것을 하나의 async function안에 넣을 수 있고 새 루프인 \",[\"$\",\"code\",null,{\"className\":\"py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace\",\"children\":\"for await ...of\"}],\" 를 이용해 모든 청크들을 비동기적으로 순회할 수 있다. 우리는 또한 여기에 \",[\"$\",\"code\",null,{\"className\":\"py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace\",\"children\":\"try-catch\"}],\" 를 더해 \",[\"$\",\"code\",null,{\"className\":\"py-1 px-2 rounded-md bg-gray-200 text-red-400 !font-monospace\",\"children\":\"unhandleRejection\"}],\" 문제를 피할 수 있다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"우리는 이미 이 새 기능들을 오늘날 실서비스에 도입하고 있다. 비동기 함수는 Node.js 8 (V8 v6.2 / Chrome 62)부터 완전히 지원되고 있고 async iterator와 generator는 Node.js 10 (V8 v6.8 / Chrome 68) 부터 완전히 지원되고 있다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-5 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"async-performance-improvements\",\"children\":[[\"$\",\"$L11\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#async-performance-improvements\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Async performance improvements\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"$\",\"$L11\",null,{\"href\":\"https://v8.dev/blog/fast-async#async-performance-improvements\",\"children\":\"https://v8.dev/blog/fast-async#async-performance-improvements\"}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"여기서부터\"}]],[\"$\",\"$L12\",null,{\"size\":\"lg\",\"shareData\":{\"title\":\"Terra Dev Blog - faster-async-functions-and-promises\",\"text\":\"$undefined\",\"url\":\"/next-blog/posts/faster-async-functions-and-promises\"},\"aria-label\":\"Share this article\"}]]}],[\"$\",\"section\",null,{\"id\":\"author\",\"children\":[\"$\",\"$L13\",null,{}]}]]}]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Terra Dev Blog - faster-async-functions-and-promises\"}],[\"$\",\"link\",\"3\",{\"rel\":\"canonical\",\"href\":\"https:/dev2820.github.io/next-blog/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https:/dev2820.github.io/next-blog/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/next-blog/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"11\",{\"name\":\"next-size-adjust\"}]]\n6:null\n"])</script></body></html>