<!DOCTYPE html><html lang="kr" class="__variable_fa65fd __variable_7691e4 scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/next-blog/_next/static/media/3e7b7e3fd4560936-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/next-blog/_next/static/media/ff840cfebfb63b0c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/40891497?v=4"/><link rel="stylesheet" href="/next-blog/_next/static/css/399f2fb131e5a5c8.css" data-precedence="next"/><link rel="stylesheet" href="/next-blog/_next/static/css/203da25389b4eeab.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/next-blog/_next/static/chunks/webpack-8f27d743501d147d.js"/><script src="/next-blog/_next/static/chunks/f14ca715-03ac7b40665f0731.js" async=""></script><script src="/next-blog/_next/static/chunks/465-9f8ee17d6a70e147.js" async=""></script><script src="/next-blog/_next/static/chunks/main-app-e31317f2a5bf611e.js" async=""></script><script src="/next-blog/_next/static/chunks/805-a8af350d35fb9160.js" async=""></script><script src="/next-blog/_next/static/chunks/app/posts/%5Bslug%5D/layout-1cf1294e1a2539f4.js" async=""></script><script src="/next-blog/_next/static/chunks/618-f2bb34773a0d24b2.js" async=""></script><script src="/next-blog/_next/static/chunks/app/posts/page-e8c6275c8ebfad50.js" async=""></script><script src="/next-blog/_next/static/chunks/952ad60e-f4d0cc7223dc0d92.js" async=""></script><script src="/next-blog/_next/static/chunks/825-5b89faade4363d84.js" async=""></script><script src="/next-blog/_next/static/chunks/349-fa0f205bb3bb240e.js" async=""></script><script src="/next-blog/_next/static/chunks/app/layout-9e366ae8b3d53f7b.js" async=""></script><script src="/next-blog/_next/static/chunks/app/posts/%5Bslug%5D/page-9f5d24ca90f99f34.js" async=""></script><link rel="preload" href="https://giscus.app/client.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-tsx.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js" as="script"/><title>Terra Dev Blog - faster-async-functions-and-promises</title><link rel="canonical" href="https://dev2820.github.io/next-blog/faster-async-functions-and-promises"/><meta property="og:title" content="faster-async-functions-and-promises"/><meta property="og:url" content="https://dev2820.github.io/next-blog/faster-async-functions-and-promises"/><meta property="og:locale" content="ko_KR"/><meta property="og:image" content="https://dev2820.github.io/next-blog/next-blog/posts/faster-async-functions-and-promises"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="600"/><meta property="og:image:alt" content="faster-async-functions-and-promises"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="faster-async-functions-and-promises"/><meta name="twitter:image" content="https://dev2820.github.io/next-blog/next-blog/posts/faster-async-functions-and-promises"/><meta name="twitter:image:width" content="800"/><meta name="twitter:image:height" content="600"/><meta name="twitter:image:alt" content="faster-async-functions-and-promises"/><link rel="icon" href="/next-blog/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/next-blog/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_fa65fd flex flex-col text-gray-800"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"/><header class="flex flex-row justify-center py-2 items-center self-center w-full max-w-screen-md px-4"><a href="/next-blog"><img alt="Terra&#x27;s Devlog logo" loading="lazy" width="258" height="48" decoding="async" data-nimg="1" style="color:transparent" src="/next-blog/_next/static/media/logo-full.a2c57f51.svg"/></a><div class="flex-1"></div><button class="__trds __trds button trds-inline-flex trds-justify-center trds-place-items-center trds-whitespace-nowrap trds-rounded-lg trds-text-md trds-font-medium trds-gap-2 trds-transition-colors trds-cursor-pointer disabled:trds-cursor-not-allowed disabled:trds-opacity-50 trds-bg-transparent trds-text-neutral-500 disabled:trds-bg-transparent enabled:hover:trds-bg-neutral-100 enabled:active:trds-bg-neutral-200 __trds trds-h-10 trds-w-10 trds-px-0 trds-py-0 mr-1 desktop:mr-8" type="button" aria-disabled="false" aria-busy="false" data-scope="dialog" data-part="trigger" dir="ltr" id="dialog::R6ja::trigger" aria-haspopup="dialog" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button class="__trds __trds button trds-inline-flex trds-justify-center trds-place-items-center trds-whitespace-nowrap trds-rounded-lg trds-text-md trds-font-medium trds-gap-2 trds-transition-colors trds-cursor-pointer disabled:trds-cursor-not-allowed disabled:trds-opacity-50 trds-bg-transparent trds-text-neutral-500 disabled:trds-bg-transparent enabled:hover:trds-bg-neutral-100 enabled:active:trds-bg-neutral-200 __trds trds-h-10 trds-w-10 trds-px-0 trds-py-0" type="button" aria-disabled="false" aria-busy="false" data-scope="dialog" data-part="trigger" dir="ltr" id="dialog::R8ja::trigger" aria-haspopup="dialog" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button></header><main class="self-center w-full max-w-screen-md p-4 text-gray-800"><article class="relative"><header id="post-meta"><h1 class="mt-10 mb-4 text-heading1 font-bold leading-normal" id="faster-async-functions-and-promises">faster-async-functions-and-promises</h1><time dateTime="2024-01-21" aria-label="Published on 2024-01-21">2024-01-21</time> <!-- -->|<!-- --> <time dateTime="PT0M" aria-label="Estimated reading time">0<!-- --> mins</time></header><div id="content" class="relative"><aside class="absolute -right-12 translate-x-full h-full w-52 desktop:block hidden"><nav class="sticky top-24"><ol><li><a href="#a-new-approach-to-async-programming"><div class="text-sm font-light data-[active=&quot;true&quot;]:text-base data-[active=&quot;true&quot;]:font-semibold py-0.5 text-neutral-400 data-[active=&quot;true&quot;]:text-primary duration-200 hover:text-primary pl-4" data-id="#a-new-approach-to-async-programming">A new approach to async programming</div></a></li><li><a href="#from-callbacks-to-promises-to-async-functions"><div class="text-sm font-light data-[active=&quot;true&quot;]:text-base data-[active=&quot;true&quot;]:font-semibold py-0.5 text-neutral-400 data-[active=&quot;true&quot;]:text-primary duration-200 hover:text-primary pl-10" data-id="#from-callbacks-to-promises-to-async-functions">from callbacks to promises to async functions</div></a></li><li><a href="#from-event-listener-calblacks-to-async-lteration"><div class="text-sm font-light data-[active=&quot;true&quot;]:text-base data-[active=&quot;true&quot;]:font-semibold py-0.5 text-neutral-400 data-[active=&quot;true&quot;]:text-primary duration-200 hover:text-primary pl-10" data-id="#from-event-listener-calblacks-to-async-lteration">From event listener calblacks to async lteration</div></a></li><li><a href="#async-performance-improvements"><div class="text-sm font-light data-[active=&quot;true&quot;]:text-base data-[active=&quot;true&quot;]:font-semibold py-0.5 text-neutral-400 data-[active=&quot;true&quot;]:text-primary duration-200 hover:text-primary pl-10" data-id="#async-performance-improvements">Async performance improvements</div></a></li></ol></nav></aside><p class="font-light leading-normal mt-4 mb-2">참고)</p>
<p class="font-light leading-normal mt-4 mb-2"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" href="https://v8.dev/blog/fast-async">https://v8.dev/blog/fast-async</a></p>
<p class="font-light leading-normal mt-4 mb-2">자바스크립트의 비동기 프로세스는 전통적으로 특별히 빠르지 않은 것으로 유명하다. 설상가상으로, 특히 Node.js 서버와 같은 라이브 자바스크립트 응용 프로그램들을 디버깅하는 것은 특히 비동기 프로그래밍에 있어서 쉬운 일이 아니다. 운 좋게도, 그들은 변화하고 있다. 이 글에서는 V8 (그리고 자바스크립트 엔진에서 어느 정도)에서 비동기 기능과 <code class="rounded-md bg-gray-200 text-red-400 py-0.5 px-2">Promise</code>를 최적화한 방법을 탐구하고 비동기 코드에 대한 디버깅 경험을 개선한 방법을 설명한다.</p>
<section aria-labelledby="a-new-approach-to-async-programming"><h2 class="mt-8 mb-3 text-heading2 font-semibold leading-normal" id="a-new-approach-to-async-programming"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" aria-hidden="true" tabindex="-1" href="#a-new-approach-to-async-programming"><span class="icon icon-link"></span></a>A new approach to async programming</h2><section aria-labelledby="from-callbacks-to-promises-to-async-functions"><h3 class="mt-7 mb-2 text-heading3 font-semibold leading-normal" id="from-callbacks-to-promises-to-async-functions"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" aria-hidden="true" tabindex="-1" href="#from-callbacks-to-promises-to-async-functions"><span class="icon icon-link"></span></a>from callbacks to promises to async functions</h3><p class="font-light leading-normal mt-4 mb-2">Promise가 자바스크립트 언어의 일부가 되기 전, callback-기반 API들은 일반적으로 비동기 코드에 특히 Node.js에서 사용되었다.</p><p class="font-light leading-normal mt-4 mb-2">(코드)</p><p class="font-light leading-normal mt-4 mb-2">앞선 방식으로 깊이 nesting된 콜백들을 사용하는 특정 패턴은 코드 가독성을 떨어뜨리고 유지보수를 어렵게 하기 때문에 &quot;callback hell&quot;이라고 불린다.</p><p class="font-light leading-normal mt-4 mb-2">운좋게도, 이제 promises가 자바스크립트 언어에 포함되었기 때문에 같은 코드도 다음과 같이 멋지고 유지보수 편하게 작성될 수 있다.</p><p class="font-light leading-normal mt-4 mb-2">(코드)</p><p class="font-light leading-normal mt-4 mb-2">더 최근엔, 자바스크립트에서 async function을 지원하기 시작했다. 앞선 비동기 코드는 이제 동기 코드와 아주 유사하게 작성될 수 있다.</p><p class="font-light leading-normal mt-4 mb-2">(코드)</p><p class="font-light leading-normal mt-4 mb-2">async 함수를 사용하면, 코드는 더 간결해지고, 동작은 여전히 비동기임에도 제어와 데이터 흐름이 훨씬 쉽게 따라온다. (자바스크립트 실행은 여전히 싱글 스레드에서 동작합을 기억하라, 이는 비동기 함수가 스스로 물리적 스레드를 생성하지 않음을 의미한다.)</p></section><section aria-labelledby="from-event-listener-calblacks-to-async-lteration"><h3 class="mt-7 mb-2 text-heading3 font-semibold leading-normal" id="from-event-listener-calblacks-to-async-lteration"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" aria-hidden="true" tabindex="-1" href="#from-event-listener-calblacks-to-async-lteration"><span class="icon icon-link"></span></a>From event listener calblacks to async lteration</h3><p class="font-light leading-normal mt-4 mb-2">Node.js에서 특히 자주 볼 수 있는 또 다른 비동기 패러다임은 ReadableStream이다. 여기 예제가 있다.</p><p class="font-light leading-normal mt-4 mb-2">(코드)</p><p class="font-light leading-normal mt-4 mb-2">이 코드는 따라가기 살짝 어려울 수 있다: 들어오는 데이터는 콜백에서만 접근할 수 있는 청크들로 처리되며, 스트림의 종료를 알리는 시그널 또한 콜백 내부에서 발생한다. 함수가 즉시 종료되고 실제 처리는 콜백 내부에서 이루어져야한다는 것을 깨닫지 못하면 버그를 만들어내기 쉽다.</p><p class="font-light leading-normal mt-4 mb-2">다행히도 ES2018에서 부터 async iteration이라 불리는 멋진 기능이 도입되어 이 코드를 단순하게 만들 수 있다.</p><p class="font-light leading-normal mt-4 mb-2">(코드)</p><p class="font-light leading-normal mt-4 mb-2">실제 요청을 처리하는 두 개의 다른 콜백(data와 end 콜백)을 삽입하는 대신, 우리는 모든 것을 하나의 async function안에 넣을 수 있고 새 루프인 <code class="rounded-md bg-gray-200 text-red-400 py-0.5 px-2">for await ...of</code> 를 이용해 모든 청크들을 비동기적으로 순회할 수 있다. 우리는 또한 여기에 <code class="rounded-md bg-gray-200 text-red-400 py-0.5 px-2">try-catch</code> 를 더해 <code class="rounded-md bg-gray-200 text-red-400 py-0.5 px-2">unhandleRejection</code> 문제를 피할 수 있다.</p><p class="font-light leading-normal mt-4 mb-2">우리는 이미 이 새 기능들을 오늘날 실서비스에 도입하고 있다. 비동기 함수는 Node.js 8 (V8 v6.2 / Chrome 62)부터 완전히 지원되고 있고 async iterator와 generator는 Node.js 10 (V8 v6.8 / Chrome 68) 부터 완전히 지원되고 있다.</p></section><section aria-labelledby="async-performance-improvements"><h3 class="mt-7 mb-2 text-heading3 font-semibold leading-normal" id="async-performance-improvements"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" aria-hidden="true" tabindex="-1" href="#async-performance-improvements"><span class="icon icon-link"></span></a>Async performance improvements</h3><p class="font-light leading-normal mt-4 mb-2"><a class="__trds trds-inline-flex trds-items-center trds-justify-start trds-whitespace-nowrap trds-gap-1 trds-transition-colors trds-cursor-pointer trds-underline-offset-4 trds-underline-under trds-decoration-[2px] trds-font-bold hover:trds-underline trds-text-primary-500 active:trds-text-primary-800 visited:trds-text-primary-800 hover:trds-text-primary-700 font-medium" type="link" href="https://v8.dev/blog/fast-async#async-performance-improvements">https://v8.dev/blog/fast-async#async-performance-improvements</a></p><p class="font-light leading-normal mt-4 mb-2">여기서부터</p></section></section><button class="__trds __trds button trds-inline-flex trds-justify-center trds-place-items-center trds-whitespace-nowrap trds-rounded-lg trds-text-md trds-font-medium trds-gap-2 trds-transition-colors trds-cursor-pointer disabled:trds-cursor-not-allowed disabled:trds-opacity-50 trds-bg-neutral trds-text-fg-neutral disabled:trds-bg-neutral enabled:hover:trds-bg-neutral-hover enabled:active:trds-bg-neutral-pressed __trds trds-h-11 trds-w-11 trds-px-0 trds-py-0" type="button" aria-disabled="false" aria-busy="false" aria-label="Share this article"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg></button><div data-scope="toast" data-part="group" dir="ltr" tabindex="-1" aria-label="bottom Notifications alt+T" id="toast-group:bottom" data-placement="bottom" data-side="bottom" data-align="center" aria-live="polite" role="region" style="position:fixed;pointer-events:none;display:flex;flex-direction:column;--gap:16px;--first-height:0px;z-index:2147483647;align-items:center;bottom:max(env(safe-area-inset-bottom, 0px), 1rem);inset-inline-end:calc(env(safe-area-inset-right, 0px) + 1rem);inset-inline-start:calc(env(safe-area-inset-left, 0px) + 1rem)"></div></div><section id="author"><div class="flex flex-row gap-4 items-center"><div data-scope="avatar" data-part="root" dir="ltr" id="avatar::Rn7obtsra:" class="trds-rounded-full trds-overflow-hidden w-16 h-16"><img data-scope="avatar" data-part="image" hidden="" dir="ltr" id="avatar::Rn7obtsra::image" data-state="hidden" src="https://avatars.githubusercontent.com/u/40891497?v=4" class="trds-bg-muted"/><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user trds-bg-muted trds-w-full trds-h-full" data-scope="avatar" data-part="fallback" dir="ltr" id="avatar::Rn7obtsra::fallback" data-state="visible"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div><div class="text-pretty flex flex-col gap-2"><strong class="inline-block h-6 min-w-36">dev2820<!-- --> <span>(<!-- -->Terra<!-- -->)</span></strong><p class="whitespace-pre-wrap h-6 min-w-64">FE Developer</p></div></div></section><section id="comments-and-reaction"><div class="giscus w-full"></div></section></article></main><footer class="self-center w-full max-w-screen-md px-4 h-96"><p>© 2024-<!-- -->2024<!-- --> <!-- -->dev2820<!-- -->. All rights reserved.</p></footer><script src="/next-blog/_next/static/chunks/webpack-8f27d743501d147d.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/next-blog/_next/static/media/3e7b7e3fd4560936-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/next-blog/_next/static/media/ff840cfebfb63b0c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/next-blog/_next/static/css/399f2fb131e5a5c8.css\",\"style\"]\n4:HL[\"/next-blog/_next/static/css/203da25389b4eeab.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[5726,[],\"\"]\n8:I[1699,[],\"\"]\na:I[2579,[],\"\"]\nb:I[3805,[\"805\",\"static/chunks/805-a8af350d35fb9160.js\",\"418\",\"static/chunks/app/posts/%5Bslug%5D/layout-1cf1294e1a2539f4.js\"],\"\"]\nc:I[9618,[\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"991\",\"static/chunks/app/posts/page-e8c6275c8ebfad50.js\"],\"\"]\nd:I[2724,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"349\",\"static/chunks/349-fa0f205bb3bb240e.js\",\"185\",\"static/chunks/app/layout-9e366ae8b3d53f7b.js\"],\"BrandLogo\"]\ne:I[8552,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"349\",\"static/chunks/349-fa0f205bb3bb240e.js\",\"185\",\"static/chunks/app/layout-9e366ae8b3d53f7b.js\"],\"GlobalNavigationBar\"]\nf:I[302,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"349\",\"static/chunks/349-fa0f205bb3bb240e.js\",\"185\",\"static/chunks/app/layout-9e366ae8b3d53f7b.js\"],\"SearchButton\"]\n11:I[3141,[],\"\"]\n9:[\"slug\",\"faster-async-functions-and-promises\",\"d\"]\n12:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/next-blog/_next/static/css/399f2fb131e5a5c8.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"M9enpQaOJD6YYnh6lpLUo\",\"assetPrefix\":\"/next-blog\",\"initialCanonicalUrl\":\"/posts/faster-async-functions-and-promises\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"faster-async-functions-and-promises\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"faster-async-functions-and-promises\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"faster-async-functions-and-promises\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",\"$L7\"],null],null]},[[[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-tsx.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js\"}],[\"$\",\"$Lb\",null,{\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js\"}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/next-blog/_next/static/css/203da25389b4eeab.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"html\",null,{\"lang\":\"kr\",\"className\":\"__variable_fa65fd __variable_7691e4 scroll-smooth\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_fa65fd flex flex-col text-gray-800\",\"children\":[[\"$\",\"link\",null,{\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css\",\"rel\":\"stylesheet\"}],[\"$\",\"header\",null,{\"className\":\"flex flex-row justify-center py-2 items-center self-center w-full max-w-screen-md px-4\",\"children\":[[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":[\"$\",\"$Ld\",null,{\"height\":48}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\"}],[\"$\",\"$Le\",null,{\"className\":\"mr-1 desktop:mr-8\"}],[\"$\",\"$Lf\",null,{}]]}],[\"$\",\"main\",null,{\"className\":\"self-center w-full max-w-screen-md p-4 text-gray-800\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$Lc\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"self-center w-full max-w-screen-md px-4 h-96\",\"children\":[\"$\",\"p\",null,{\"children\":[\"© 2024-\",2024,\" \",\"dev2820\",\". All rights reserved.\"]}]}]]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L10\"],\"globalErrorComponent\":\"$11\",\"missingSlots\":\"$W12\"}]]\n"])</script><script>self.__next_f.push([1,"13:I[2870,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"805\",\"static/chunks/805-a8af350d35fb9160.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-9f5d24ca90f99f34.js\"],\"TableOfContents\"]\n14:I[6894,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"805\",\"static/chunks/805-a8af350d35fb9160.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-9f5d24ca90f99f34.js\"],\"Anchor\"]\n15:I[1232,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"805\",\"static/chunks/805-a8af350d35fb9160.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-9f5d24ca90f99f34.js\"],\"ShareButton\"]\n16:I[4201,[\"587\",\"static/chunks/952ad60e-f4d0cc7223dc0d92.js\",\"618\",\"static/chunks/618-f2bb34773a0d24b2.js\",\"825\",\"static/chunks/825-5b89faade4363d84.js\",\"805\",\"static/chunks/805-a8af350d35fb9160.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-9f5d24ca90f99f34.js\"],\"AuthorInfo\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"article\",null,{\"className\":\"relative\",\"children\":[[\"$\",\"header\",null,{\"id\":\"post-meta\",\"children\":[\"$undefined\",[\"$\",\"h1\",null,{\"className\":\"mt-10 mb-4 text-heading1 font-bold leading-normal\",\"id\":\"faster-async-functions-and-promises\",\"children\":\"faster-async-functions-and-promises\"}],[\"$\",\"time\",null,{\"dateTime\":\"2024-01-21\",\"aria-label\":\"Published on 2024-01-21\",\"children\":\"2024-01-21\"}],\" \",\"|\",\" \",[\"$\",\"time\",null,{\"dateTime\":\"PT0M\",\"aria-label\":\"Estimated reading time\",\"children\":[0,\" mins\"]}]]}],[\"$\",\"div\",null,{\"id\":\"content\",\"className\":\"relative\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"absolute -right-12 translate-x-full h-full w-52 desktop:block hidden\",\"children\":[\"$\",\"$L13\",null,{\"toc\":[{\"level\":2,\"content\":\"A new approach to async programming\",\"slug\":\"#a-new-approach-to-async-programming\"},{\"level\":3,\"content\":\"from callbacks to promises to async functions\",\"slug\":\"#from-callbacks-to-promises-to-async-functions\"},{\"level\":3,\"content\":\"From event listener calblacks to async lteration\",\"slug\":\"#from-event-listener-calblacks-to-async-lteration\"},{\"level\":3,\"content\":\"Async performance improvements\",\"slug\":\"#async-performance-improvements\"}],\"className\":\"sticky top-24\"}]}],[[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"참고)\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"$\",\"$L14\",null,{\"href\":\"https://v8.dev/blog/fast-async\",\"children\":\"https://v8.dev/blog/fast-async\"}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"자바스크립트의 비동기 프로세스는 전통적으로 특별히 빠르지 않은 것으로 유명하다. 설상가상으로, 특히 Node.js 서버와 같은 라이브 자바스크립트 응용 프로그램들을 디버깅하는 것은 특히 비동기 프로그래밍에 있어서 쉬운 일이 아니다. 운 좋게도, 그들은 변화하고 있다. 이 글에서는 V8 (그리고 자바스크립트 엔진에서 어느 정도)에서 비동기 기능과 \",[\"$\",\"code\",null,{\"className\":\"rounded-md bg-gray-200 text-red-400 py-0.5 px-2\",\"children\":\"Promise\"}],\"를 최적화한 방법을 탐구하고 비동기 코드에 대한 디버깅 경험을 개선한 방법을 설명한다.\"]}],\"\\n\",[\"$\",\"section\",null,{\"aria-labelledby\":\"a-new-approach-to-async-programming\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"mt-8 mb-3 text-heading2 font-semibold leading-normal\",\"id\":\"a-new-approach-to-async-programming\",\"children\":[[\"$\",\"$L14\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#a-new-approach-to-async-programming\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"A new approach to async programming\"]}],[\"$\",\"section\",null,{\"aria-labelledby\":\"from-callbacks-to-promises-to-async-functions\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"mt-7 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"from-callbacks-to-promises-to-async-functions\",\"children\":[[\"$\",\"$L14\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#from-callbacks-to-promises-to-async-functions\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"from callbacks to promises to async functions\"]}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"Promise가 자바스크립트 언어의 일부가 되기 전, callback-기반 API들은 일반적으로 비동기 코드에 특히 Node.js에서 사용되었다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"앞선 방식으로 깊이 nesting된 콜백들을 사용하는 특정 패턴은 코드 가독성을 떨어뜨리고 유지보수를 어렵게 하기 때문에 \\\"callback hell\\\"이라고 불린다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"운좋게도, 이제 promises가 자바스크립트 언어에 포함되었기 때문에 같은 코드도 다음과 같이 멋지고 유지보수 편하게 작성될 수 있다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"더 최근엔, 자바스크립트에서 async function을 지원하기 시작했다. 앞선 비동기 코드는 이제 동기 코드와 아주 유사하게 작성될 수 있다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"async 함수를 사용하면, 코드는 더 간결해지고, 동작은 여전히 비동기임에도 제어와 데이터 흐름이 훨씬 쉽게 따라온다. (자바스크립트 실행은 여전히 싱글 스레드에서 동작합을 기억하라, 이는 비동기 함수가 스스로 물리적 스레드를 생성하지 않음을 의미한다.)\"}]]}],[\"$\",\"section\",null,{\"aria-labelledby\":\"from-event-listener-calblacks-to-async-lteration\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"mt-7 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"from-event-listener-calblacks-to-async-lteration\",\"children\":[[\"$\",\"$L14\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#from-event-listener-calblacks-to-async-lteration\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"From event listener calblacks to async lteration\"]}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"Node.js에서 특히 자주 볼 수 있는 또 다른 비동기 패러다임은 ReadableStream이다. 여기 예제가 있다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"이 코드는 따라가기 살짝 어려울 수 있다: 들어오는 데이터는 콜백에서만 접근할 수 있는 청크들로 처리되며, 스트림의 종료를 알리는 시그널 또한 콜백 내부에서 발생한다. 함수가 즉시 종료되고 실제 처리는 콜백 내부에서 이루어져야한다는 것을 깨닫지 못하면 버그를 만들어내기 쉽다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"다행히도 ES2018에서 부터 async iteration이라 불리는 멋진 기능이 도입되어 이 코드를 단순하게 만들 수 있다.\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"(코드)\"}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"실제 요청을 처리하는 두 개의 다른 콜백(data와 end 콜백)을 삽입하는 대신, 우리는 모든 것을 하나의 async function안에 넣을 수 있고 새 루프인 \",[\"$\",\"code\",null,{\"className\":\"rounded-md bg-gray-200 text-red-400 py-0.5 px-2\",\"children\":\"for await ...of\"}],\" 를 이용해 모든 청크들을 비동기적으로 순회할 수 있다. 우리는 또한 여기에 \",[\"$\",\"code\",null,{\"className\":\"rounded-md bg-gray-200 text-red-400 py-0.5 px-2\",\"children\":\"try-catch\"}],\" 를 더해 \",[\"$\",\"code\",null,{\"className\":\"rounded-md bg-gray-200 text-red-400 py-0.5 px-2\",\"children\":\"unhandleRejection\"}],\" 문제를 피할 수 있다.\"]}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"우리는 이미 이 새 기능들을 오늘날 실서비스에 도입하고 있다. 비동기 함수는 Node.js 8 (V8 v6.2 / Chrome 62)부터 완전히 지원되고 있고 async iterator와 generator는 Node.js 10 (V8 v6.8 / Chrome 68) 부터 완전히 지원되고 있다.\"}]]}],[\"$\",\"section\",null,{\"aria-labelledby\":\"async-performance-improvements\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"mt-7 mb-2 text-heading3 font-semibold leading-normal\",\"id\":\"async-performance-improvements\",\"children\":[[\"$\",\"$L14\",null,{\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"href\":\"#async-performance-improvements\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Async performance improvements\"]}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":[\"$\",\"$L14\",null,{\"href\":\"https://v8.dev/blog/fast-async#async-performance-improvements\",\"children\":\"https://v8.dev/blog/fast-async#async-performance-improvements\"}]}],[\"$\",\"p\",null,{\"className\":\"font-light leading-normal mt-4 mb-2\",\"children\":\"여기서부터\"}]]}]]}]],[\"$\",\"$L15\",null,{\"size\":\"lg\",\"shareData\":{\"title\":\"Terra Dev Blog - faster-async-functions-and-promises\",\"text\":\"$undefined\",\"url\":\"/next-blog/posts/faster-async-functions-and-promises\"},\"aria-label\":\"Share this article\"}]]}],[\"$\",\"section\",null,{\"id\":\"author\",\"children\":[\"$\",\"$L16\",null,{}]}],[\"$\",\"section\",null,{\"id\":\"comments-and-reaction\",\"children\":[[\"$\",\"$Lb\",null,{\"src\":\"https://giscus.app/client.js\",\"data-repo\":\"dev2820/blog-posts\",\"data-repo-id\":\"R_kgDOLQagPA\",\"data-category\":\"General\",\"data-category-id\":\"DIC_kwDOLQagPM4CjAtl\",\"data-mapping\":\"og:title\",\"data-strict\":\"0\",\"data-reactions-enabled\":\"1\",\"data-emit-metadata\":\"0\",\"data-input-position\":\"top\",\"data-theme\":\"light\",\"data-lang\":\"ko\",\"data-loading\":\"lazy\",\"cross-origin\":\"anonymous\",\"async\":true}],[\"$\",\"div\",null,{\"className\":\"giscus w-full\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Terra Dev Blog - faster-async-functions-and-promises\"}],[\"$\",\"link\",\"3\",{\"rel\":\"canonical\",\"href\":\"https://dev2820.github.io/next-blog/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://dev2820.github.io/next-blog/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image\",\"content\":\"https://dev2820.github.io/next-blog/next-blog/posts/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:alt\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:image\",\"content\":\"https://dev2820.github.io/next-blog/next-blog/posts/faster-async-functions-and-promises\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image:alt\",\"content\":\"faster-async-functions-and-promises\"}],[\"$\",\"link\",\"18\",{\"rel\":\"icon\",\"href\":\"/next-blog/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"19\",{\"name\":\"next-size-adjust\"}]]\n6:null\n"])</script></body></html>